{% extends "base.html.j2" %}
{% set title = "mel — friendly git abstraction for non‑engineers" %}
{% set active = 'home' %}

{% block content %}
  <h1><code>mel</code>curial</h1>
  <p class="muted">Many non-engineers have contributions for codebases (static sites, docs, design tweaks, image swaps, etc.) and the learning curve on git is steep.
  
  <code>mel</code> is a simplification of a common git flow that makes versioned collaboration more approachable for those non-engineer contributors.</p>

  <p class="muted">Mission: enable non-engineers to contribute!</p>

  <h2>Install</h2>
  <p class="muted">macOS/Linux (no sudo). On macOS installs to <code>/opt/homebrew/bin</code> or <code>/usr/local/bin</code> when writable; otherwise to <code>~/.local/bin</code>.</p>
  <div class="code-wrapper">
    <pre><code class="language-bash">curl -fsSL https://raw.githubusercontent.com/davefowler/melcurial/main/install.sh | bash</code></pre>
    <button class="copy-btn" aria-label="Copy install command">Copy</button>
  </div>

  <h2>Usage</h2>
  <div class="card" role="region" aria-label="Usage">
    <div class="tabbar" role="tablist" aria-label="Audience">
      <button id="tab-users" class="active" role="tab" aria-controls="panel-users" aria-selected="true">for non‑engineers</button>
      <button id="tab-eng" role="tab" aria-controls="panel-eng" aria-selected="false">for engineers</button>
    </div>
    <div class="card-body">
      <section id="panel-users" class="section active" role="tabpanel" aria-labelledby="tab-users">
        <p>Use these commands in your project folder. Plain language, safe defaults, and helpful prompts.</p>
        <pre><code class="language-bash">{{ DOC_FOR_NON_ENGINEERS }}</code></pre>
        <p class="muted">Tips:</p>
        <ul class="checklist">
          <li>If mel asks what to do with local changes, choose Save or Stash.</li>
          <li>If mel asks to confirm adding files, review the list and type <code>y</code> to continue.</li>
          <li>If mel offers to open a pull request, say yes and follow the link.</li>
        </ul>
      </section>

      <section id="panel-eng" class="section" role="tabpanel" aria-labelledby="tab-eng">
        <p>Engineer‑oriented descriptions and full list:</p>
        <pre><code class="language-bash">{{ DOC_FOR_ENGINEERS }}

{{ DOC_FOR_ENGINEERS_ADVANCED }}</code></pre>
        <p class="muted">See <a href="./config.html">Config</a> for scripts, hooks, update strategy, and non‑interactive mode.</p>
      </section>
    </div>
  </div>

  <h2>Team setup</h2>
  <p>To tailor mel for your team (tests, scripts, update behavior), visit the <a href="./config.html">Configuration</a> page.</p>

  <footer>
    <p class="muted">Built for Mel. Use at your own risk.</p>
  </footer>

  <script>
    const usersBtn = document.getElementById('tab-users');
    const engBtn = document.getElementById('tab-eng');
    const usersPanel = document.getElementById('panel-users');
    const engPanel = document.getElementById('panel-eng');
    function activate(which){
      const isUsers = which === 'users';
      usersBtn.classList.toggle('active', isUsers);
      engBtn.classList.toggle('active', !isUsers);
      usersBtn.setAttribute('aria-selected', String(isUsers));
      engBtn.setAttribute('aria-selected', String(!isUsers));
      usersPanel.classList.toggle('active', isUsers);
      engPanel.classList.toggle('active', !isUsers);
    }
    usersBtn.addEventListener('click', () => activate('users'));
    engBtn.addEventListener('click', () => activate('eng'));

    function copyInstallCode(btn) {
      const wrapper = btn.closest('.code-wrapper');
      const code = wrapper.querySelector('code');
      const text = code.textContent;
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        btn.classList.add('copied');
        setTimeout(() => {
          btn.textContent = 'Copy';
          btn.classList.remove('copied');
        }, 2000);
      });
    }
    (function(){
      const wrapper = document.querySelector('.code-wrapper');
      if (!wrapper) return;
      const btn = wrapper.querySelector('.copy-btn');
      wrapper.addEventListener('click', function(){
        if (btn) copyInstallCode(btn);
      });
      if (btn) {
        btn.addEventListener('click', function(e){
          e.stopPropagation();
          copyInstallCode(btn);
        });
      }
    })();
  </script>
{% endblock %}


